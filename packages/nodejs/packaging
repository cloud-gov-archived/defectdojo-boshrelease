#!/bin/bash

set -e # exit immediately if a simple command exits with a non-zero status
set -u # report the usage of uninitialized variables

# Detect # of CPUs so make jobs can be parallelized
CPUS=$(grep -c ^processor /proc/cpuinfo)

# Extract nodejs package
tar xzvf nodejs/node-v18.18.0.tar.gz

# Build nodejs package
pushd node-v18.18.0
  ./configure \
    --prefix=${BOSH_INSTALL_TARGET}
  make -j $CPUS
  make install
popd
