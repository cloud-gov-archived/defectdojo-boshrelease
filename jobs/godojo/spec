---
name: godojo

templates:
  bin/dojoConfig.yml.erb: bin/dojoConfig.yml
  bin/godojo: bin/godojo.sh
  bin/pre-start.erb: bin/pre-start
  config/bpm.yml.erb: config/bpm.yml

packages:
  - godojo

properties:
  dojo.install.DD_Version:
    description: |
      Release version of DefectDojo from Github Releases
    default: "2.27.4"
  dojo.install.DD_Quiet:
    description: |
      Suppress normal output - only errors will be shown
    default: true
  dojo.install.DD_Trace:
    description: |
      Boolean to enable the most verbose logging during install
    default: false
  dojo.install.DD_Redact:
    description: |
      Boolean to redact sensitive info from the logs
    default: true
  dojo.install.DD_Root:
    description: |
      Root directory for the DefectDojo app Note: No trailing /
    default: "/var/vcap/jobs/godojo"
  dojo.install.DD_Source:
    description: |
      Directory in DD_Root for DefectDojo source code
    default: "django-DefectDojo"
  dojo.install.DD_Files:
    description: |
      Directory in DD_Root for local files (static assets, uploads, etc)
    default: "django-DefectDojo"
  dojo.install.DD_Media:
    description: |
      Directory in DD_Files for uploaded files (screenshots, test artifacts, etc)
    default: "media"
  dojo.install.DD_Static:
    description: |
      Directory in DD_Files for static asset files (JS, images, etc)
    default: "static"
  dojo.install.DD_App:
    description: |
      Directory in DD_Source where the DefectDojo Django app is located
    default: "dojo"
  dojo.DD_DB_Engine:
    description: |
      Database engine to use (SQLite, MySQL, PostgreSQL, MariaDB) Note: CASE sEnSiTiVE!
    default: "PostgreSQL"
  dojo.DD_DB_Local:
    description: |
      Boolean for when DB is on the same host/server/vm
    default: true
  dojo.DD_DB_Exists:
    description: |
      Boolean for when DB for DefectDojo already exists so no install needed
    default: false
  dojo.DD_DB_Ruser:
    description: |
      Superuser for the database
  dojo.DD_DB_Rpass:
    description: |
      Password for the database superuser
  dojo.DD_DB_Name:
    description: |
      Name of the database that DefectDojo will use
    default: dojodb
  dojo.DD_DB_User:
    description: |
      Username of the database user that DefectDojo will use
  dojo.DD_DB_Pass:
    description: |
      Password for the database user DefectDojo will use
  dojo.DD_DB_Host:
    description: |
      Database hostname
    default: localhost
  dojo.DD_DB_Port:
    description: |
      Port the database is listening on
    default: 5432
  dojo.DD_DB_Drop:
    description: |
      Boolean to tell the installer to drop an existing DB if found
    default: false
  dojo.DD_OS_User:
    description: |
      OS user to own the DefectDojo instll and files
  dojo.DD_OS_Pass:
    description: |
      Password for the OS user for DefectDojo
  dojo.DD_OS_Group:
    description: |
      OS Group to own the DefectDojo install and files
  dojo.DD_OS_UID:
    description: |
      User ID for the DefectDojo OS user
  dojo.DD_OS_GID:
    description: |
      Group ID for the DefectDojo OS group
  dojo.DD_ADMIN_User:
    description: |
      Admin user for the DefectDojo web app
  dojo.DD_ADMIN_Pass:
    description: |
      Password for the DefectDojo web app admin user
